<!DOCTYPE html>
<!-- saved from url=(0058)https://www.lamoda.ru/static/17.04.04/js/localstorage.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"></head><body>
        <script type="text/javascript">
            (function(){
                function handleRequest(event){
                    if (/\.local|(\.lamoda\.(ru|kz|ua|by|team))/.test(event.origin)){
                        var data = {};
                        try {
                            data = JSON.parse(event.data);
                        } catch(e) {
                            data = event.data;
                        }
                        var key = data.key,
                            response = {
                                type: 'localstorage',
                                id: data.id,
                                action: data.action,
                                key: key
                            };

                        switch (data.action) {
                            case 'get':
                                response.value = window.localStorage.getItem(key);
                                break;
                            case 'set':
                                window.localStorage.setItem(key, data.value);
                                break;
                            case 'remove':
                                window.localStorage.removeItem(key)
                                break;
                        }

                        event.source.postMessage(
                            JSON.stringify(response),
                            event.origin
                        );
                    }
                }

                if(window.addEventListener){
                    window.addEventListener("message", handleRequest, false);
                } else if (window.attachEvent){
                    window.attachEvent("onmessage", handleRequest);
                }
            })();
        </script>
    
</body></html>